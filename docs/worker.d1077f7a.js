parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"BHXf":[function(require,module,exports) {
"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function t(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function e(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}function n(r,t){return i(r)||u(r,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(r,t){var e=[],n=!0,o=!1,u=void 0;try{for(var i,a=r[Symbol.iterator]();!(n=(i=a.next()).done)&&(e.push(i.value),!t||e.length!==t);n=!0);}catch(s){o=!0,u=s}finally{try{n||null==a.return||a.return()}finally{if(o)throw u}}return e}function i(r){if(Array.isArray(r))return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shuffle=function(r){for(var t=r.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),n=r[t];r[t]=r[e],r[e]=n}},exports.each=function(r,t){for(var e=0,n=r.length;e<n;e++)t(r[e],e,r)},exports.times=function(r,t){for(var e=new Array(r),n=0;n<r;n++)e[n]=t(n,e);return e},exports.map=function(r,t){for(var e=new Array(r.length),n=0,o=r.length;n<o;n++)e[n]=t(r[n],n,r);return e},exports.reduce=function(r,t,e){for(var n=0,o=r.length;n<o;n++)e=t(e,r[n],n,r);return e},exports.clamp=function(r,t,e){return Math.max(t,Math.min(e,r))},exports.coinFlip=function(){return Boolean(Math.round(Math.random()))},exports.assertNever=function(r){throw new TypeError("never violation: ".concat(JSON.stringify(r)))},exports.isNumeric=function(r){var t=Number(r);return!Number.isNaN(t)},exports.getUrlHashParams=function(){var r=window.location.hash||"";if(!r.startsWith("#"))return{};var t=r.split("#")[1].split("&");return exports.reduce(t,function(r,t){var e=n(t.split("="),2),o=e[0],u=e[1];return r[o]=exports.isNumeric(u)?Number(u):u,r},{})};var a=function(){function t(e){r(this,t),this.queue=[],this.limit=e}return e(t,[{key:"add",value:function(r){this.queue.unshift(r),this.queue.length>this.limit&&this.queue.pop()}},{key:"values",value:function(){return this.queue}}]),t}();exports.RecentQueue=a;
},{}],"uubC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util"),r=function(t){return function(r,e){for(var n=new Float32Array(r.length),o="number"==typeof e,a=0,u=r.length;a<u;a++){var i=r[a],s=o?e:e[a];n[a]=t(i,s)}return n}};exports.add=r(function(t,r){return t+r}),exports.subtract=r(function(t,r){return t-r}),exports.multiply=r(function(t,r){return t*r}),exports.divide=r(function(t,r){return t/r}),exports.getDistanceSq=function(t,r){var e=exports.subtract(t,r);return exports.getMagnitudeSq(e)},exports.getDistance=function(t,r){return Math.sqrt(exports.getDistanceSq(t,r))},exports.getMagnitudeSq=function(t){for(var r=0,e=0,n=t.length;e<n;e++)r+=t[e]*t[e];return r},exports.getMagnitude=function(t){return Math.sqrt(exports.getMagnitudeSq(t))},exports.setMagnitude=function(t,r){var e=exports.getMagnitude(t);return 0===e?exports.add(t,Math.sqrt(r/t.length)):exports.multiply(t,r/e)},exports.limitMagnitude=function(t,r){var e=r*r,n=exports.getMagnitudeSq(t);return n>e?exports.multiply(t,e/n):t},exports.getAverage=function(t){if(0===t.length)throw new Error("Cannot average zero vectors");for(var r=t.length,e=t[0].length,n=new Float32Array(e),o=0;o<r;o++)for(var a=0;a<e;a++)n[a]=n[a]+t[o][a]/r;return n},exports.radialRandomVector=function(r){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new Float32Array(r),o=e*e,a=0;a<r;a++){var u=Math.random()*Math.sqrt(o);o-=u*u,n[a]=t.coinFlip()?u:-u}return t.shuffle(n),n},exports.assign=function(t,r){for(var e=new Float32Array(t.length),n=0,o=t.length;n<o;n++)e[n]=n<r.length?r[n]:t[n];return e};
},{"../util":"BHXf"}],"j1Bg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util"),t=require("./vector-n");exports.getNeighborhood=function(r){return e.map(r,function(n){var i=[];return e.each(r,function(e,r){if(n!==e){var i=t.subtract(n.position,e.position);return{index:r,delta:i,distance:t.getMagnitude(i)}}}),i.sort(function(e,t){return e.distance-t.distance}),i})};
},{"../util":"BHXf","./vector-n":"uubC"}],"33s5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toParticle=function(o){var t=o.dimensions,i=o.position,r=o.velocity,n=o.acceleration;return{dimensions:t,position:e(i),velocity:e(r),acceleration:e(n)}};var e=function(e){for(var o=0,t=[];void 0!==e[o];)t[o]=e[o],o++;return new Float32Array(t)};
},{}],"OZOR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../particle/vector-n"),t=require("../../util");exports.orbits=function(i,a,r){var c=r.distance.min*r.distance.min,n=r.distance.max*r.distance.max,s=r.mass;t.each(i,function(i){var a=e.multiply(i.position,-1),o=t.clamp(e.getMagnitudeSq(a),c,n),d=s.g*s.attractor*s.orbiter/o;a=e.setMagnitude(a,d),a=e.divide(a,r.mass.orbiter),i.acceleration=e.add(i.acceleration,a)})};
},{"../../particle/vector-n":"uubC","../../util":"BHXf"}],"YwtD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("./orbits");!function(e){e.Orbits="orbits"}(e=exports.BehaviorNames||(exports.BehaviorNames={}));var o={orbits:r.orbits};exports.behavior=function(e,r,t){return o[t.name](e,r,t.config)};
},{"./orbits":"OZOR"}],"EOmG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../particle/vector-n"),t=require("../../util");exports.centerScaling=function(i,r){if(!(i.length<1)){var n=r*r,o=t.reduce(i,function(t,i){return Math.max(t,e.getMagnitudeSq(i.position))},0);if(!(o<=n)){var u=n/o;t.each(i,function(t){return t.position=e.multiply(t.position,u)})}}};
},{"../../particle/vector-n":"uubC","../../util":"BHXf"}],"NuHD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("./centerScaling");!function(e){e.CenterScaling="centerScaling"}(e=exports.BoundingNames||(exports.BoundingNames={}));var r={centerScaling:n.centerScaling};exports.bounding=function(e,n,t){return r[t](e,n)};
},{"./centerScaling":"EOmG"}],"bZCJ":[function(require,module,exports) {
"use strict";function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var o=0;o<i.length;o++){var t=i[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(e,o,t){return o&&i(e.prototype,o),t&&i(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../particle/neighbors"),n=require("../particle/vector-n"),r=require("../util"),a=require("./behavior/behavior"),c=require("./bounding/bounding"),u={behaviorSpec:{name:a.BehaviorNames.Orbits,config:{mass:{g:1,orbiter:10,attractor:30},distance:{min:50,max:250}}},boundingName:c.BoundingNames.CenterScaling,maxForce:1,maxSpeed:1,radius:1},s=function(){function i(){e(this,i),this.particles=[],this.neighborhood=[],this.config=u}return o(i,[{key:"init",value:function(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.particles=e,this.neighborhood=i,this.config=Object.assign({},this.config,o)}},{key:"tick",value:function(){var e=this.particles,i=this.neighborhood,o=this.config;r.each(e,function(e){return e.acceleration=n.multiply(e.acceleration,0)}),a.behavior(e,i,o.behaviorSpec),r.each(e,function(e){e.velocity=n.add(e.velocity,e.acceleration),e.velocity=n.limitMagnitude(e.velocity,o.maxSpeed),e.position=n.add(e.position,e.velocity)}),c.bounding(e,o.radius,o.boundingName),this.neighborhood=t.getNeighborhood(e)}},{key:"getData",value:function(){return{particles:this.particles,neighborhood:this.neighborhood}}}]),i}();exports.Simulation=s;
},{"../particle/neighbors":"j1Bg","../particle/vector-n":"uubC","../util":"BHXf","./behavior/behavior":"YwtD","./bounding/bounding":"NuHD"}],"0INl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../particle/neighbors"),t=require("../particle/particle-msg"),r=require("../util"),i=require("./Simulation"),a=self,s=new i.Simulation,c=function(e){return a.postMessage(JSON.stringify(e))};a.addEventListener("message",function(i){var n=JSON.parse(i.data);switch(n.type){case"init":var o=r.map(n.particles,t.toParticle),u=e.getNeighborhood(o);s.init(o,u,n.config);break;case"tick":s.tick(),c(s.getData());break;case"destroy":a.close();break;default:r.assertNever(n)}});
},{"../particle/neighbors":"j1Bg","../particle/particle-msg":"33s5","../util":"BHXf","./Simulation":"bZCJ"}]},{},["0INl"], null)
//# sourceMappingURL=worker.0b71dd91.map